{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/app.tsx","webpack:///./src/app/components/components.tsx","webpack:///./src/app/helpers/api.ts","webpack:///./src/app/store/search.ts","webpack:///./src/browser.tsx"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/browser.tsx\",\"vendors~main\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { SearchStore } from './store/search';\nimport { SearchResponse } from './helpers/api';\nimport { Root, Header, HeaderH1, Button, Image, Footer, DepartureListItem, CitiesListItem, Ul, Container } from './components/components';\nimport { Locations } from './helpers/locations';\nimport { Operators } from './helpers/operators';\n\ninterface Props {\n    store: SearchStore;\n}\n\nconst formatBackgroundImage = (imageUrl: string, width: string, height: string): string => {\n    let url = imageUrl.replace(/{width}/, width);\n    url.replace(/{width}/, width)\n    url.replace(/{height}/, height)\n    console.log(url);\n    return url;\n} \n\nconst getLocationById = (locations: Locations[], departureId: number) => {\n    return locations.filter(({ id }) => id === departureId);\n}\n\nconst getOperatorById = (oporators: Operators[], operatorId: string) => {\n    return oporators.filter(({ id }) => id === operatorId);\n}\n\n@inject('store')\n@observer\nclass App extends React.Component<Props> {\n    render() {\n        const { search, results, isComplete } = this.props.store;\n\n\n        return (\n            <Root>\n                <Header>\n                    <HeaderH1>Its Time to book for</HeaderH1>\n                    <Image src={'osheaga.png'} />\n                </Header>\n                <Header>\n                    <Button onClick={() => search()}>Lets Go!</Button>\n                </Header>\n\n                {results && (\n                    <Container>\n                        <Ul>\n                            {results.cities.map(city => \n                                <CitiesListItem \n                                    key={city.id}\n                                    backgroundImg={formatBackgroundImage(city.image_url, \"400\", \"400\")}\n                                >\n                                    <h3>{city.full_name}</h3>\n                                </CitiesListItem>\n                            )}\n                        </Ul>\n                        <h3>{`isLoaded: ${isComplete}`}</h3>\n                        <Ul>\n                            {results.departures.map(departure => \n                                <DepartureListItem key={departure.id}>\n                                    <div>\n                                        <img src={getOperatorById(results.operators, departure.operator_id)[0].logo_url} />\n                                    </div>\n                                    <div>\n                                        <span>\n                                            <b>{departure.departure_time}: </b>\n                                            {getLocationById(\n                                                results.locations,\n                                                departure.origin_location_id\n                                            )[0].name}\n                                        </span>\n                                        <h2>{departure.duration}</h2>\n                                        <span>\n                                            <b>{departure.arrival_time}: </b> \n                                            {getLocationById(\n                                                results.locations,\n                                                departure.destination_location_id\n                                            )[0].name}\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <span>Price: ${departure.totalPrice}</span>\n                                    </div>\n                                </DepartureListItem>\n                            )}\n                        </Ul>\n                        <Ul>\n                            {results.operators.map(operator => \n                                <li key={operator.id}>\n                                    {operator.display_name}\n                                </li>\n                            )}\n                        </Ul>\n                    </Container>\n                )}\n                <Footer />\n            </Root>\n        );\n    }\n}\n\n\nexport default App;","import styled, { injectGlobal } from 'styled-components';\n\ninjectGlobal`\n    body {\n        margin: 0;\n        padding: 0;\n        font-family: sans-serif;\n        background: linear-gradient(rgb(14, 138, 197), rgb(7, 155, 188), rgb(117, 205, 245));\n    }\n`\n\nexport const Root = styled.div`\n    min-height: 100vh;\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: column;\n`;\n\nexport const Container = styled.div`\n    padding: 20px;\n`;\n\nexport const DepartureListItem = styled.li`\n    display: flex;\n    justify-content: space-around;\n    background: white;\n    padding: 20px;\n    width: 100%;\n    margin: 10px 0;\n`;\n\nexport const Ul = styled.ul`\n    padding: 0;\n    list-style: none;\n    display: flex;\n    flex-wrap: wrap;\n`;\n\nexport const CitiesListItem = styled.li`\n    flex: 1;\n    min-height: 200px;\n    background: url(${props => props.backgroundImg});\n    background-size: cover;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    > h3 {\n        text-align: center;\n    }\n`;\n\nexport const Footer = styled.footer`\n    min-height: 35vw;\n    background-image: url(oshegaFooter.png);\n    background-repeat: no-repeat;\n    background-size: 100% auto;\n`;\n\nexport const Header = styled.header`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 150px;\n`;\n\nexport const HeaderH1 = styled.h1`\n    padding-right: 15px;\n    color: #fff;\n    font-family: sans-serif;\n`;\n\nexport const Image = styled.img`\n    max-width: 100%;\n    height: 80px;\n`;\n\nexport const Button = styled.button`\n    font-size: 16px;\n    padding: 10px 20px;\n    border: none;\n    color: #0898bd;\n`;\n","import { Cities } from \"./cities\";\nimport { Operators } from \"./operators\";\nimport { Departures } from \"./departures\";\nimport { Locations } from \"./locations\";\n\n\n\nexport interface SearchResponse {\n  cities: Cities[],\n  complete: boolean,\n  departures: Departures[],\n  operators: Operators[],\n  locations: Locations[]\n  destination_city_id: String,\n  is_valid_route: boolean,\n  origin_city_id: String,\n}\n\nconst endpoint = 'https://napi.busbud.com/x-departures';\nconst buildQuery = (\n  origin = \"dr5reg\" as string,\n  destination = \"f25dvk\" as string, \n  outboundDate = \"2018-08-02\" as string, \n) => `${endpoint}/${origin}/${destination}/${outboundDate}`;\n\n\nconst headers = {\n  Accept: 'application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/',\n  'X-Busbud-Token': 'PARTNER_JSWsVZQcS_KzxNRzGtIt1A'\n};\n\nexport const fetchSearch = (): Promise<SearchResponse> => fetch(\n  buildQuery(),\n  { headers },\n).then(res => res.json()) \n\n\nexport const adaptResponse = (results: SearchResponse) => {\n  return ({\n    ...results,\n    departures: results.departures.map(departure => ({\n      ...departure,\n      arrival_time: new Date(departure.arrival_time).getHours(),\n      departure_time: new Date(departure.departure_time).getHours(),\n      totalPrice: (departure.prices.total / 100),\n      duration: departure.duration / 60,\n    }))\n  })\n}","import { action, computed, observable, reaction, when } from 'mobx';\nimport { fetchSearch, SearchResponse, adaptResponse } from '../helpers/api';\n\n\nexport class SearchStore {\n  @observable requestStatus = 'INPROGRESS' as 'INPROGRESS' | 'RESOLVED'\n  @observable isComplete = undefined as undefined | boolean;\n  @observable results = undefined as undefined | SearchResponse;\n\n  @action\n  search = async () => {\n    try {\n      const results = await fetchSearch();\n      this.isComplete = results.complete\n      console.log(results.complete)\n      console.log(results);\n      \n      if (results.complete) {\n        this.isComplete = true;\n        this.requestStatus = 'RESOLVED';\n      }\n      return this.results = adaptResponse(results);\n    } finally {}\n  }\n}\n\nconst searchStore: SearchStore = new SearchStore();\n\nwhen(\n  () => (\n    searchStore.isComplete !== undefined \n    && !searchStore.isComplete \n    && searchStore.requestStatus !== 'RESOLVED'\n  ),\n  () => { \n    console.log('searchStore.isComplete !== undefined:', searchStore.isComplete !== undefined);\n    console.log('  && !searchStore.isComplete: ', !searchStore.isComplete); \n    console.log('&& resolved', searchStore.requestStatus !== 'RESOLVED')\n    setTimeout(() => searchStore.search(), 3000)\n  },\n  { \n    name: 'polling search'\n  }\n);\n\n\n\nexport default searchStore;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Provider } from 'mobx-react';\nimport App from './app/app';\nimport SearchStore from './app/store/search';\n\nconst initialData = JSON.parse(document.getElementById('initial-data').getAttribute('data-json'));\n\nReactDOM.hydrate(\n  <Provider store={SearchStore}>\n    <App />\n  </Provider>, \n  document.getElementById('app')\n);"],"sourceRoot":""}